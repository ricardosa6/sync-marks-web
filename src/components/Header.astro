---
import ToggleThemeButton from "./ToggleThemeButton.astro";
import SyncMarksLogo from "./SyncMarksLogo.astro";
import LanguageSelector from "./LanguageSelector.astro";
import IconMenu from "@/icons/IconMenu.astro";
import Sidebar from "@/components/Sidebar.astro";

import { getLangFromUrl, useTranslatedPath } from "@/i18n/utils";

const lang = getLangFromUrl(Astro.url);
const translatePath = useTranslatedPath(lang);
---

<header
  id="header"
  class="z-40 fixed top-0 w-full p-4 !border-b-slate-500 dark:!border-b-slate-700 header-animate"
>
  <div
    class="max-w-screen-xl mx-auto flex justify-between gap-2 items-center dark:text-slate-300 text-slate-700"
  >
    <a href={translatePath("/")}>
      <SyncMarksLogo />
    </a>
    <div class="flex items-center gap-2">
      <ToggleThemeButton />
      <LanguageSelector />
      <div class="hidden md:block"></div>
      <!-- <Sidebar /> -->
      <div class="block md:hidden"></div>
    </div>
  </div>
</header>

<style>
  .header-animate {
    animation: opacity-blur-header-light linear both;
    animation-timeline: scroll();
    animation-range: 0 100px;
  }

  html.dark .header-animate {
    animation: opacity-blur-header-dark linear both;
    animation-timeline: scroll();
    animation-range: 0 100px;
  }

  @keyframes opacity-blur-header-light {
    100% {
      backdrop-filter: blur(4px);
      border-bottom: 0.5px solid;
      background-color: rgba(255, 255, 255, 0.4);
    }
  }

  @keyframes opacity-blur-header-dark {
    100% {
      backdrop-filter: blur(4px);
      border-bottom: 0.5px solid;
      background-color: rgba(0, 0, 0, 0.4);
    }
  }
</style>
